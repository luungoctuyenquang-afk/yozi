<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MQTTèŠå¤©å®¤æˆ¿é—´å†å²è®°å½•åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .test-header {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .feature-demo {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            margin: 15px 0;
        }
        .test-step {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 3px solid #28a745;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .test-button.secondary {
            background: #28a745;
        }
        .test-button.secondary:hover {
            background: #218838;
        }
        .highlight {
            background: yellow;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .code {
            background: #f8f9fa;
            padding: 8px;
            border-radius: 4px;
            font-family: monospace;
            border: 1px solid #dee2e6;
            margin: 8px 0;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .info {
            color: #17a2b8;
            font-weight: bold;
        }
        .warning {
            color: #ffc107;
            font-weight: bold;
        }
        .demo-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .feature-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .feature-list ul {
            margin: 0;
            padding-left: 20px;
        }
        .feature-list li {
            margin: 5px 0;
        }
        @media (max-width: 768px) {
            .demo-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-header">ğŸ§ª MQTTèŠå¤©å®¤æˆ¿é—´å†å²è®°å½•åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="feature-demo">
            <h3>âœ¨ æ–°åŠŸèƒ½ä»‹ç»</h3>
            <div class="feature-list">
                <h4>ğŸ“š æˆ¿é—´å†å²è®°å½•åŠŸèƒ½ï¼š</h4>
                <ul>
                    <li>è‡ªåŠ¨è®°å½•æœ€è¿‘ä½¿ç”¨çš„æˆ¿é—´å’Œæ˜µç§°</li>
                    <li>ç‚¹å‡»å†å²è®°å½•å¿«é€Ÿå¡«å……æˆ¿é—´å·å’Œæ˜µç§°</li>
                    <li>æ˜¾ç¤ºæœ€åä½¿ç”¨æ—¶é—´ï¼ˆç›¸å¯¹æ—¶é—´ï¼‰</li>
                    <li>æ”¯æŒåˆ é™¤å•ä¸ªå†å²è®°å½•</li>
                    <li>æ”¯æŒæ¸…ç©ºæ‰€æœ‰å†å²è®°å½•</li>
                    <li>æœ€å¤šä¿å­˜10æ¡å†å²è®°å½•</li>
                </ul>
                
                <h4>â° æ¶ˆæ¯æ—¶é—´æˆ³ä¼˜åŒ–ï¼š</h4>
                <ul>
                    <li>æ™ºèƒ½æ—¶é—´æ˜¾ç¤ºï¼šåˆšåˆšã€Xåˆ†é’Ÿå‰ã€Xå°æ—¶å‰</li>
                    <li>æ˜¨å¤©æ¶ˆæ¯æ˜¾ç¤ºï¼šæ˜¨å¤© HH:MM</li>
                    <li>æ›´æ—©æ¶ˆæ¯æ˜¾ç¤ºï¼šMM-DD HH:MM</li>
                    <li>æ›´äººæ€§åŒ–çš„æ—¶é—´ä½“éªŒ</li>
                </ul>
            </div>
        </div>

        <div class="demo-grid">
            <div>
                <h3>ğŸ¯ æˆ¿é—´å†å²è®°å½•æµ‹è¯•æ­¥éª¤</h3>
                <div class="test-step">
                    <strong>ç¬¬1æ­¥ï¼š</strong> æ‰“å¼€è™šæ‹Ÿæ‰‹æœºåº”ç”¨
                    <br><button class="test-button" onclick="openApp()">æ‰“å¼€åº”ç”¨</button>
                </div>
                
                <div class="test-step">
                    <strong>ç¬¬2æ­¥ï¼š</strong> è¿›å…¥MQTTèŠå¤©å®¤ï¼Œè¿æ¥ä¸€ä¸ªæˆ¿é—´
                    <br><span class="info">å»ºè®®æˆ¿é—´å·ï¼štest-history-001</span>
                </div>
                
                <div class="test-step">
                    <strong>ç¬¬3æ­¥ï¼š</strong> ç¦»å¼€æˆ¿é—´ï¼Œé‡æ–°è¿›å…¥èŠå¤©å®¤
                    <br><span class="success">åº”è¯¥çœ‹åˆ°å†å²è®°å½•åŒºåŸŸå‡ºç°</span>
                </div>
                
                <div class="test-step">
                    <strong>ç¬¬4æ­¥ï¼š</strong> ç‚¹å‡»å†å²è®°å½•é¡¹ï¼ŒéªŒè¯è‡ªåŠ¨å¡«å……
                    <br><span class="success">æˆ¿é—´å·å’Œæ˜µç§°åº”è¯¥è‡ªåŠ¨å¡«å……</span>
                </div>
                
                <div class="test-step">
                    <strong>ç¬¬5æ­¥ï¼š</strong> æµ‹è¯•åˆ é™¤å’Œæ¸…ç©ºåŠŸèƒ½
                    <br><span class="info">ç‚¹å‡»Ã—åˆ é™¤å•æ¡ï¼Œç‚¹å‡»ğŸ—‘ï¸æ¸…ç©ºæ‰€æœ‰</span>
                </div>
            </div>

            <div>
                <h3>â° æ—¶é—´æˆ³ä¼˜åŒ–æµ‹è¯•</h3>
                <div class="test-step">
                    <strong>æ—¶é—´æ˜¾ç¤ºæµ‹è¯•ï¼š</strong>
                    <ul>
                        <li>å‘é€æ¶ˆæ¯åç«‹å³æŸ¥çœ‹æ—¶é—´æˆ³</li>
                        <li>ç­‰å¾…å‡ åˆ†é’Ÿåå‘é€æ–°æ¶ˆæ¯</li>
                        <li>è§‚å¯Ÿæ—¶é—´æˆ³æ ¼å¼å˜åŒ–</li>
                    </ul>
                </div>
                
                <div class="test-step">
                    <strong>å¤šç”¨æˆ·æµ‹è¯•ï¼š</strong> 
                    <br><button class="test-button secondary" onclick="openMultiple()">æ‰“å¼€å¤šä¸ªçª—å£</button>
                    <br><small>ä½¿ç”¨ä¸åŒæ˜µç§°è¿æ¥åŒä¸€æˆ¿é—´ï¼Œæµ‹è¯•å†å²è®°å½•</small>
                </div>
                
                <div class="test-step">
                    <strong>æŒä¹…åŒ–æµ‹è¯•ï¼š</strong> åˆ·æ–°é¡µé¢åé‡æ–°è¿›å…¥ï¼ŒéªŒè¯å†å²è®°å½•æ˜¯å¦ä¿å­˜
                </div>
            </div>
        </div>
    </div>

    <div class="test-container">
        <h2 class="test-header">ğŸ” åŠŸèƒ½éªŒè¯æ¸…å•</h2>
        
        <div id="checklistContainer">
            <h4>ğŸ“š æˆ¿é—´å†å²è®°å½•åŠŸèƒ½ï¼š</h4>
            <label><input type="checkbox" id="check1"> è¿æ¥æˆ¿é—´åè‡ªåŠ¨æ·»åŠ åˆ°å†å²è®°å½•</label><br>
            <label><input type="checkbox" id="check2"> å†å²è®°å½•åŒºåŸŸæ­£ç¡®æ˜¾ç¤º</label><br>
            <label><input type="checkbox" id="check3"> ç‚¹å‡»å†å²è®°å½•é¡¹è‡ªåŠ¨å¡«å……æˆ¿é—´å·å’Œæ˜µç§°</label><br>
            <label><input type="checkbox" id="check4"> æ˜¾ç¤ºç›¸å¯¹æ—¶é—´ï¼ˆåˆšåˆšã€Xåˆ†é’Ÿå‰ç­‰ï¼‰</label><br>
            <label><input type="checkbox" id="check5"> å¯ä»¥åˆ é™¤å•ä¸ªå†å²è®°å½•</label><br>
            <label><input type="checkbox" id="check6"> å¯ä»¥æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•</label><br>
            <label><input type="checkbox" id="check7"> å†å²è®°å½•æ•°é‡é™åˆ¶ä¸º10æ¡</label><br>
            <label><input type="checkbox" id="check8"> é¡µé¢åˆ·æ–°åå†å²è®°å½•ä»ç„¶å­˜åœ¨</label><br>
            
            <h4>â° æ—¶é—´æˆ³ä¼˜åŒ–åŠŸèƒ½ï¼š</h4>
            <label><input type="checkbox" id="check9"> æ–°æ¶ˆæ¯æ˜¾ç¤º"åˆšåˆš"</label><br>
            <label><input type="checkbox" id="check10"> å‡ åˆ†é’Ÿå‰çš„æ¶ˆæ¯æ˜¾ç¤º"Xåˆ†é’Ÿå‰"</label><br>
            <label><input type="checkbox" id="check11"> å‡ å°æ—¶å‰çš„æ¶ˆæ¯æ˜¾ç¤º"Xå°æ—¶å‰"</label><br>
            <label><input type="checkbox" id="check12"> æ˜¨å¤©çš„æ¶ˆæ¯æ˜¾ç¤º"æ˜¨å¤© HH:MM"</label><br>
            <label><input type="checkbox" id="check13"> æ›´æ—©çš„æ¶ˆæ¯æ˜¾ç¤º"MM-DD HH:MM"</label><br>
            
            <h4>ğŸ¨ ç•Œé¢å’Œäº¤äº’ï¼š</h4>
            <label><input type="checkbox" id="check14"> å†å²è®°å½•æ ·å¼ç¾è§‚</label><br>
            <label><input type="checkbox" id="check15"> é¼ æ ‡æ‚¬åœæ•ˆæœæ­£å¸¸</label><br>
            <label><input type="checkbox" id="check16"> æ²¡æœ‰JavaScripté”™è¯¯</label><br>
        </div>

        <div style="margin-top: 20px;">
            <button class="test-button" onclick="checkProgress()">æ£€æŸ¥æµ‹è¯•è¿›åº¦</button>
            <button class="test-button secondary" onclick="resetChecklist()">é‡ç½®æ¸…å•</button>
        </div>
        
        <div id="progressResult"></div>
    </div>

    <div class="test-container">
        <h2 class="test-header">ğŸ› ï¸ æŠ€æœ¯å®ç°è¯¦æƒ…</h2>
        
        <div class="code">
            <strong>æˆ¿é—´å†å²è®°å½•æ•°æ®ç»“æ„ï¼š</strong><br>
            {<br>
            &nbsp;&nbsp;roomId: string,<br>
            &nbsp;&nbsp;nickname: string,<br>
            &nbsp;&nbsp;timestamp: number,<br>
            &nbsp;&nbsp;lastUsed: number<br>
            }
        </div>
        
        <div class="code">
            <strong>å…³é”®å‡½æ•°ï¼š</strong><br>
            â€¢ loadRoomHistory() - ä»localStorageåŠ è½½å†å²è®°å½•<br>
            â€¢ saveRoomHistory() - ä¿å­˜å†å²è®°å½•åˆ°localStorage<br>
            â€¢ addToRoomHistory() - æ·»åŠ æˆ¿é—´åˆ°å†å²è®°å½•<br>
            â€¢ updateRoomHistoryDisplay() - æ›´æ–°UIæ˜¾ç¤º<br>
            â€¢ formatMessageTime() - æ ¼å¼åŒ–æ¶ˆæ¯æ—¶é—´æˆ³
        </div>
        
        <div class="code">
            <strong>å­˜å‚¨æœºåˆ¶ï¼š</strong><br>
            â€¢ ä½¿ç”¨localStorageæŒä¹…åŒ–å­˜å‚¨<br>
            â€¢ æœ€å¤§ä¿å­˜10æ¡å†å²è®°å½•<br>
            â€¢ è‡ªåŠ¨å»é‡ï¼Œç›¸åŒæˆ¿é—´åªä¿ç•™æœ€æ–°è®°å½•<br>
            â€¢ æŒ‰æœ€åä½¿ç”¨æ—¶é—´æ’åº
        </div>
    </div>

    <div class="test-container">
        <h2 class="test-header">ğŸ› å·²çŸ¥é™åˆ¶å’Œæ”¹è¿›å»ºè®®</h2>
        
        <div class="test-step">
            <strong>å½“å‰é™åˆ¶ï¼š</strong>
            <ul>
                <li>å†å²è®°å½•ä»…ä¿å­˜åœ¨å½“å‰æµè§ˆå™¨ä¸­</li>
                <li>æ— æ³•è·¨è®¾å¤‡åŒæ­¥å†å²è®°å½•</li>
                <li>æ—¶é—´æˆ³åŸºäºå®¢æˆ·ç«¯æ—¶é—´ï¼Œå¯èƒ½å­˜åœ¨æ—¶åŒºé—®é¢˜</li>
            </ul>
        </div>
        
        <div class="test-step">
            <strong>æœªæ¥ä¼˜åŒ–æ–¹å‘ï¼š</strong>
            <ul>
                <li>æ·»åŠ å†å²è®°å½•æœç´¢åŠŸèƒ½</li>
                <li>æ”¯æŒå†å²è®°å½•åˆ†ç±»ï¼ˆå¸¸ç”¨ã€æœ€è¿‘ç­‰ï¼‰</li>
                <li>æ·»åŠ æˆ¿é—´æè¿°æˆ–æ ‡ç­¾</li>
                <li>æ”¯æŒå†å²è®°å½•å¯¼å‡º/å¯¼å…¥</li>
                <li>äº‘ç«¯åŒæ­¥å†å²è®°å½•</li>
            </ul>
        </div>
    </div>

    <script>
        function openApp() {
            window.open('http://localhost:3000', '_blank', 'width=400,height=800');
        }
        
        function openMultiple() {
            // æ‰“å¼€3ä¸ªçª—å£ç”¨äºå¤šç”¨æˆ·æµ‹è¯•
            for (let i = 1; i <= 3; i++) {
                setTimeout(() => {
                    window.open('http://localhost:3000', `_blank_${i}`, 'width=350,height=700,left=' + (i * 380));
                }, i * 500);
            }
            alert('å·²æ‰“å¼€3ä¸ªæµ‹è¯•çª—å£ï¼Œè¯·ä½¿ç”¨ä¸åŒæ˜µç§°è¿æ¥åˆ°ä¸åŒæˆ¿é—´æµ‹è¯•å†å²è®°å½•åŠŸèƒ½');
        }
        
        function checkProgress() {
            const checkboxes = document.querySelectorAll('#checklistContainer input[type="checkbox"]');
            const total = checkboxes.length;
            const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
            const percentage = Math.round((checked / total) * 100);
            
            let result = `<div style="margin-top: 15px; padding: 15px; border-radius: 8px; `;
            
            if (percentage === 100) {
                result += `background: #d4edda; color: #155724;">
                    ğŸ‰ <strong>æµ‹è¯•å®Œæˆï¼</strong> æ‰€æœ‰åŠŸèƒ½éªŒè¯é€šè¿‡ (${checked}/${total})
                    <br>æˆ¿é—´å†å²è®°å½•å’Œæ—¶é—´æˆ³ä¼˜åŒ–åŠŸèƒ½å·²æˆåŠŸé›†æˆå¹¶æ­£å¸¸å·¥ä½œï¼`;
            } else if (percentage >= 70) {
                result += `background: #fff3cd; color: #856404;">
                    âš ï¸ <strong>åŸºæœ¬åŠŸèƒ½æ­£å¸¸</strong> è¿›åº¦: ${checked}/${total} (${percentage}%)
                    <br>å»ºè®®å®Œæˆå‰©ä½™æµ‹è¯•é¡¹ç›®ä»¥ç¡®ä¿åŠŸèƒ½å®Œæ•´æ€§`;
            } else {
                result += `background: #f8d7da; color: #721c24;">
                    âŒ <strong>éœ€è¦è¿›ä¸€æ­¥æµ‹è¯•</strong> è¿›åº¦: ${checked}/${total} (${percentage}%)
                    <br>è¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤è¿›è¡ŒåŠŸèƒ½éªŒè¯`;
            }
            
            result += `</div>`;
            document.getElementById('progressResult').innerHTML = result;
        }
        
        function resetChecklist() {
            const checkboxes = document.querySelectorAll('#checklistContainer input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = false);
            document.getElementById('progressResult').innerHTML = '';
        }
        
        // é¡µé¢åŠ è½½æ—¶çš„è¯´æ˜
        window.onload = function() {
            console.log('ğŸš€ MQTTèŠå¤©å®¤æˆ¿é—´å†å²è®°å½•åŠŸèƒ½æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            console.log('ğŸ“‹ è¯·æŒ‰ç…§é¡µé¢ä¸Šçš„æ­¥éª¤è¿›è¡ŒåŠŸèƒ½æµ‹è¯•');
            console.log('ğŸ’¡ å»ºè®®æµ‹è¯•å¤šä¸ªæˆ¿é—´çš„å†å²è®°å½•åŠŸèƒ½');
        };
    </script>
</body>
</html>
